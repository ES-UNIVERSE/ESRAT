<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="telegramAdmin.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="apks/favicon.ico" type="image/x-icon">
    <title>TG Admin</title>
</head>
<body>
    <nav class="navbar"> 
        <h class="logo"> 
            <a href="/ESRAT/index-home.html"> 
                <img src="/ESRAT/img/logo.png" height="100px">
            </a>
        </h>

        <ul>
            <li><a href="/ESRAT/index-home.html" class="active">HOME</a></li>
            <li><a href="/ESRAT/apks/guides.txt">GUIDES</a></li>
            <li><a href="/ESRAT/apks/packages/packages.html">SOURCEs</a></li>
        </ul>
    </nav>

    <div class="input-container">
        <label class="file-icon" for="fileInput">➕ Files</label>
        <input type="file" id="fileInput" accept="*/*" />
        <input type="text" id="messageInput" placeholder="🖋️ Write your messages . . . " />
        <button id="sendMessageButton" class="button1">Send</button>
    </div>
    
    <script>
        document.getElementById('sendMessageButton').addEventListener('click', function() {
    const message = document.getElementById('messageInput').value;
    const fileInput = document.getElementById('fileInput');
    const file = fileInput.files[0];

    console.log('Message:', message); // Log the message input
    console.log('File:', file); // Log the file input

    if (file) {
        // If a file is selected, send the file
        const formData = new FormData();
        formData.append('chat_id', chatId);
        formData.append('document', file);

        console.log('Sending file to Telegram...'); // Log when sending file

        fetch(`https://api.telegram.org/bot${botToken}/sendDocument`, {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            console.log('File send response:', data); // Log the response
            if(data.ok) {
                alert('File sent successfully!');
            } else {
                alert('Error sending file: ' + data.description);
            }
        })
        .catch(error => console.error('Error:', error));
    } else if (message) {
        // If no file is selected, send a text message
        const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;
        
        console.log('Sending message to Telegram...'); // Log when sending message

        fetch(url)
        .then(response => response.json())
        .then(data => {
            console.log('Message send response:', data); // Log the response
            if(data.ok) {
                alert('Message sent successfully!');
            } else {
                alert('Error sending message: ' + data.description);
            }
        })
        .catch(error => console.error('Error:', error));
    } else {
        alert('Please enter a message or select a file to send.');
    }
});

    </script>
</body>
</html>
